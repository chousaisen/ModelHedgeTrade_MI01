//+------------------------------------------------------------------+
//|                                                   CMasterDB.mqh  |
//|                                                         rkee.rkk |
//+------------------------------------------------------------------+
#property copyright "rkee.rkk"
#property link      ""
#property version   "1.00"

#include "../../header/database/CHeader.mqh"

class CMasterDB
  {
private:
     string   dbName;
     int      dbConnect;
public:
     //+------------------------------------------------------------------+
     //|  构造函数
     //+------------------------------------------------------------------+
                     CMasterDB();
     //+------------------------------------------------------------------+
     //|  析构函数
     //+------------------------------------------------------------------+
                    ~CMasterDB();
     //+------------------------------------------------------------------+
     //|  初始化数据库连接
     //+------------------------------------------------------------------+
     void            init();
     //+------------------------------------------------------------------+
     //|  获取数据库连接句柄
     //+------------------------------------------------------------------+
     int             getConnect(){return this.dbConnect;}
  };

//+------------------------------------------------------------------+
//|  初始化数据库连接
//+------------------------------------------------------------------+
void CMasterDB::init(){
    this.dbName="master_01";
    this.dbConnect = DatabaseOpen(this.dbName, DATABASE_OPEN_READWRITE | DATABASE_OPEN_CREATE);
    if (this.dbConnect == INVALID_HANDLE) {
        Print("无法打开或创建数据库文件");
        return;
    }
}

//+------------------------------------------------------------------+
//|  构造函数
//+------------------------------------------------------------------+
CMasterDB::CMasterDB(){}

//+------------------------------------------------------------------+
//|  析构函数
//+------------------------------------------------------------------+
CMasterDB::~CMasterDB(){
    DatabaseClose(this.dbConnect);
    Print("数据库操作完成。");
}
